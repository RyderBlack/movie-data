<!DOCTYPE html>
<html>
    <head>
        <head>
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <meta name="description" content="">
            <meta name="author" content="">
            <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
            <script src="app.js" type="text/javascript"></script>

            <title>Movie Data</title>

            <!-- Bootstrap core CSS -->
            <link href="assets/css/bootstrap.css" rel="stylesheet">

            <!-- Custom styles for this template -->
            <link href="assets/css/soon.css" rel="stylesheet">

            <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
            <!--[if lt IE 9]> <script src="assets/js/html5shiv.js"></script> <script src="assets/js/respond.min.js"></script> <![endif]-->

            <link href='http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic' rel='stylesheet' type='text/css'>
            <link href='http://fonts.googleapis.com/css?family=Raleway:400,300,700' rel='stylesheet' type='text/css'>
        </head>
        <!-- START BODY -->
        <body >

            <!-- START HEADER -->
            <section id="header">
                <div class="container-fluid">
                    <header>
                        <!-- HEADLINE -->
                        <h1 data-animated="GoIn" class="text-center">
                            <b>
                                Sci-Fi</b> <br>
                              Movies List
                            </h1>
                    </header>

                    <div class="row">
                      <div class="col-md-6 col-sm-offset-3">
                        <form class="form1">
                            <input class="input1" type="text" placeholder="search by name or release date"/>
                        </form>
                      </div>
                    </div>

                  <div class="container-fluid films-display"></div>

                </div>   <!-- END container fluid  -->

            </section>
            <!-- END HEADER -->

            <!-- START TABLE -->

            <script type="text/javascript">

                const lesFilms = 'https://api.themoviedb.org/3/genre/878/movies?api_key=e72f880255c5b01996f688fc51152f3a';
                const lesFilms02 = 'https://api.themoviedb.org/3/genre/878/movies?api_key=e72f880255c5b01996f688fc51152f3a&page=2';
                const lesFilms03 = 'https://api.themoviedb.org/3/genre/878/movies?api_key=e72f880255c5b01996f688fc51152f3a&page=3';
                const lesFilms04 = 'https://api.themoviedb.org/3/genre/878/movies?api_key=e72f880255c5b01996f688fc51152f3a&page=4';
                const lesFilms05 = 'https://api.themoviedb.org/3/genre/878/movies?api_key=e72f880255c5b01996f688fc51152f3a&page=5';
                const lesFilms06 = 'https://api.themoviedb.org/3/genre/878/movies?api_key=e72f880255c5b01996f688fc51152f3a&page=6';
                const lesFilms07 = 'https://api.themoviedb.org/3/genre/878/movies?api_key=e72f880255c5b01996f688fc51152f3a&page=7';
                const lesFilms08 = 'https://api.themoviedb.org/3/genre/878/movies?api_key=e72f880255c5b01996f688fc51152f3a&page=8';
                const lesFilms09 = 'https://api.themoviedb.org/3/genre/878/movies?api_key=e72f880255c5b01996f688fc51152f3a&page=9';
                const lesFilms010 = 'https://api.themoviedb.org/3/genre/878/movies?api_key=e72f880255c5b01996f688fc51152f3a&page=10';
                const lesFilms011 = 'https://api.themoviedb.org/3/genre/878/movies?api_key=e72f880255c5b01996f688fc51152f3a&page=11';
                const lesFilms012 = 'https://api.themoviedb.org/3/genre/878/movies?api_key=e72f880255c5b01996f688fc51152f3a&page=12';
                const lesFilms013 = 'https://api.themoviedb.org/3/genre/878/movies?api_key=e72f880255c5b01996f688fc51152f3a&page=13';
                const lesFilms014 = 'https://api.themoviedb.org/3/genre/878/movies?api_key=e72f880255c5b01996f688fc51152f3a&page=14';
                const lesFilms015 = 'https://api.themoviedb.org/3/genre/878/movies?api_key=e72f880255c5b01996f688fc51152f3a&page=15';
                const lesFilms016 = 'https://api.themoviedb.org/3/genre/878/movies?api_key=e72f880255c5b01996f688fc51152f3a&page=16';
                const lesFilms017 = 'https://api.themoviedb.org/3/genre/878/movies?api_key=e72f880255c5b01996f688fc51152f3a&page=17';
                const lesFilms018 = 'https://api.themoviedb.org/3/genre/878/movies?api_key=e72f880255c5b01996f688fc51152f3a&page=18';
                const lesFilms019 = 'https://api.themoviedb.org/3/genre/878/movies?api_key=e72f880255c5b01996f688fc51152f3a&page=19';
                const lesFilms020 = 'https://api.themoviedb.org/3/genre/878/movies?api_key=e72f880255c5b01996f688fc51152f3a&page=20';
                const lesFilms021 = 'https://api.themoviedb.org/3/genre/878/movies?api_key=e72f880255c5b01996f688fc51152f3a&page=21';
                const lesFilms022 = 'https://api.themoviedb.org/3/genre/878/movies?api_key=e72f880255c5b01996f688fc51152f3a&page=22';
                const lesFilms023 = 'https://api.themoviedb.org/3/genre/878/movies?api_key=e72f880255c5b01996f688fc51152f3a&page=23';
                const lesFilms024 = 'https://api.themoviedb.org/3/genre/878/movies?api_key=e72f880255c5b01996f688fc51152f3a&page=24';
                const lesFilms025 = 'https://api.themoviedb.org/3/genre/878/movies?api_key=e72f880255c5b01996f688fc51152f3a&page=25';

                const films = [];

                fetch(lesFilms).then(blob => blob.json()).then(data => films.push(...data.results));
                fetch(lesFilms02).then(blob => blob.json()).then(data => films.push(...data.results));
                fetch(lesFilms03).then(blob => blob.json()).then(data => films.push(...data.results));
                fetch(lesFilms04).then(blob => blob.json()).then(data => films.push(...data.results));
                fetch(lesFilms05).then(blob => blob.json()).then(data => films.push(...data.results));
                fetch(lesFilms06).then(blob => blob.json()).then(data => films.push(...data.results));
                fetch(lesFilms07).then(blob => blob.json()).then(data => films.push(...data.results));
                fetch(lesFilms08).then(blob => blob.json()).then(data => films.push(...data.results));
                fetch(lesFilms09).then(blob => blob.json()).then(data => films.push(...data.results));
                fetch(lesFilms010).then(blob => blob.json()).then(data => films.push(...data.results));
                fetch(lesFilms011).then(blob => blob.json()).then(data => films.push(...data.results));
                fetch(lesFilms012).then(blob => blob.json()).then(data => films.push(...data.results));
                fetch(lesFilms013).then(blob => blob.json()).then(data => films.push(...data.results));
                fetch(lesFilms014).then(blob => blob.json()).then(data => films.push(...data.results));
                fetch(lesFilms015).then(blob => blob.json()).then(data => films.push(...data.results));
                fetch(lesFilms016).then(blob => blob.json()).then(data => films.push(...data.results));
                fetch(lesFilms017).then(blob => blob.json()).then(data => films.push(...data.results));
                fetch(lesFilms018).then(blob => blob.json()).then(data => films.push(...data.results));
                fetch(lesFilms019).then(blob => blob.json()).then(data => films.push(...data.results));
                fetch(lesFilms020).then(blob => blob.json()).then(data => films.push(...data.results));
                fetch(lesFilms021).then(blob => blob.json()).then(data => films.push(...data.results));
                fetch(lesFilms022).then(blob => blob.json()).then(data => films.push(...data.results));
                fetch(lesFilms023).then(blob => blob.json()).then(data => films.push(...data.results));
                fetch(lesFilms024).then(blob => blob.json()).then(data => films.push(...data.results));
                fetch(lesFilms025).then(blob => blob.json()).then(data => films.push(...data.results));
                console.log(films);

                function trouverFilm(recherche, films) {
                    return films.filter(results => {
                        const regex = new RegExp("^"+recherche, 'gi');
                        const regex02 = new RegExp(recherche, 'gi');
                        return results.original_title.match(regex) || results.release_date.match(regex02);
                    });
                }

                function afficherResultat() {
                    const tableauResultat = trouverFilm(this.value, films);
                    const html = tableauResultat.map(results => {
                        return `
            <div class="col-sm-3 vignette text-center" >
              <img class="img-films" src="https://image.tmdb.org/t/p/w640${results.poster_path}" alt="affiche film">
              <h4>${results.original_title}</h4>
            </div>
            `;
                    }).join('');
                    resultat.innerHTML = html;
                }

                const input = document.querySelector('input');
                const resultat = document.querySelector('.films-display');

                document.addEventListener('DOMContentLoaded', afficherResultat());
                input.addEventListener('change', afficherResultat);
                input.addEventListener('keyup', afficherResultat);
            </script>
            <!-- END TABLE -->
            <!-- Bootstrap core JavaScript
    ================================================== -->
            <!-- Placed at the end of the document so the pages load faster -->
            <script src="assets/js/jquery.min.js"></script>
            <script type="text/javascript" src="assets/js/modernizr.custom.js"></script>
            <script src="assets/js/soon/plugins.js"></script>
            <script src="assets/js/soon/jquery.themepunch.revolution.min.js"></script>
            <script src="assets/js/soon/custom.js"></script>
        </body>
        <!-- END BODY -->
    </html>
